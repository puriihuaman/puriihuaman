---
import type { Image } from "@models/image";
import type { SimpleRepository } from "@models/repository";
import "./project-card.css";

interface Props {
	repository: SimpleRepository;
}

const {
	repository: {
		images,
		name,
		updatedAt,
		homepage,
		description,
		topics,
		htmlUrl,
	},
} = Astro.props;
---

<article class="project-card">
	<div class="project-card-image">
		{
			images.length > 0 ? (
				images.map((image: Image): any => {
					const path: string = image.downloadUrl || image.htmlUrl;
					return (
						<a
							href={htmlUrl}
							title={name}
							rel="nofollow noopener noreferrer"
							target="_blank"
						>
							<img
								src={path}
								alt={name}
								loading="lazy"
								width="100%"
								height="100%"
							/>
						</a>
					);
				})
			) : (
				<img src="/assets/icons/skeleton.svg" alt="Sin imagen" />
			)
		}
	</div>

	<div class="project-card-container">
		<h3 class="project-card-title">{name}</h3>

		<p>
			<span class="project-card-date">
				{updatedAt}
			</span>
		</p>

		<p class="project-card-description">{description}</p>

		<ul>
			<li>{topics}</li>
		</ul>

		<footer class="project-card-footer">
			<a
				class="link"
				href={homepage || ""}
				title={name}
				aria-label="Go to project demo"
				rel="nofollow noopener noreferrer"
				target="_blank"
			>
				Demo
			</a>

			<a
				class="github"
				href={htmlUrl}
				title={name}
				aria-label="Go to project demo"
				rel="nofollow noopener noreferrer"
				target="_blank"
			>
				CÃ³digo
			</a>
		</footer>
	</div>
</article>
